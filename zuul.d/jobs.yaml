- job:
    name: base
    parent: null
    abstract: true
    description: |
      The base job for OTC installation of Zuul.

      All jobs ultimately inherit from this.  It runs a pre-playbook
      which copies all of the job's prepared git repos on to all of
      the nodes in the nodeset.  It runs a post-playbook which copies
      all of the files in the logs/ subdirectory of the executor
      work directory to the logserver.

      It also sets default timeout and nodeset values (which may be
      overidden).

      Responds to these variables:

      .. zuul:jobvar:: base_serial
         :default: Omitted

         This sets the serial keyword in the pre and post playbooks
         which can be an integer or percentage.

         See ansible documentation for more information:
         http://docs.ansible.com/ansible/latest/playbooks_delegation.html

    pre-run: playbooks/base/pre.yaml
    post-run:
      - playbooks/base/post.yaml
      - playbooks/base/post-logs.yaml
    cleanup-run: playbooks/base/cleanup.yaml
    roles:
      - zuul: opentelekomcloud-infra/zuul-jobs
    timeout: 1800
    post-timeout: 1800
    vars:
      ara_report_type: html
      ara_report_path: ara-report
      ara_compress_html: false
    nodeset: fedora-30
    secrets:
      - otc_cloud_logs
